(self.webpackChunkproyecto_t4=self.webpackChunkproyecto_t4||[]).push([[681],{2681:(t,n,e)=>{"use strict";e.r(n),e.d(n,{CommentsModule:()=>R});var i=e(8583),o=e(665),r=e(3238),c=e(4426),s=e(7957),m=e(8259),a=e.n(m),d=e(7716),l=e(8726),u=e(1841),g=e(5917),f=e(8002),p=e(5304),h=e(2340),x=e(9666);let C=(()=>{class t{constructor(t,n){this.http=t,this.userService=n,this.url=h.N.baseUrl}getAllComments(t){return this.http.get(`${this.url}/comments/film/${t}`).pipe((0,f.U)(t=>{for(let n of t.comments)this.userService.getOneUser(n.UserId).subscribe(t=>n.user=t);return t}))}getOneComment(t,n){return this.http.get(`${this.url}/comments/film/${t}/${n}`)}getOneCommentByUser(t){const n=(new u.WM).set("x-token",localStorage.getItem("token"));return this.http.get(`${this.url}/comments/byuser/${t}`,{headers:n}).pipe((0,p.K)(t=>(0,g.of)(t.message)))}insertOneComment(t,n){const e=(new u.WM).set("x-token",localStorage.getItem("token"));return this.http.post(`${this.url}/comments/film/${t}`,n,{headers:e})}updateOneComment(t,n,e){const i=(new u.WM).set("x-token",localStorage.getItem("token"));return this.http.put(`${this.url}/comments/film/${t}/${n}`,e,{headers:i})}deleteOneComment(t,n){const e=(new u.WM).set("x-token",localStorage.getItem("token"));return this.http.delete(`${this.url}/comments/film/${t}/${n}`,{headers:e})}}return t.\u0275fac=function(n){return new(n||t)(d.LFG(u.eN),d.LFG(x.K))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=e(6518),Z=e(9350);function _(t,n){if(1&t&&d._UZ(0,"big-stars",6),2&t){const t=d.oxw();d.Q6J("initial_stars",t.film.puntuacion_media/2)("size",t.screen)}}let w=(()=>{class t{constructor(){}get filmImage(){return this.film.img&&!this.film.img.includes("/")?`${h.N.filmsImageUrl}/${this.film.id}`:this.film.img}get screen(){return this.innerWidth>=650?5:2}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-film-info"]],inputs:{film:"film",innerWidth:"innerWidth"},decls:16,vars:10,consts:[[1,"row","film-info"],[1,"col-md-5","col-sm-10","justify-content-center","d-flex"],["alt","pelicula",3,"src"],[1,"col-md-5","col-sm-10"],[1,"comment-container",2,"background-color","transparent !important"],["color","#11101d",3,"initial_stars","size",4,"ngIf"],["color","#11101d",3,"initial_stars","size"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"div",3),d.TgZ(4,"h1"),d._uU(5),d.ALo(6,"titlecase"),d.qZA(),d.TgZ(7,"h3"),d._uU(8),d.qZA(),d.TgZ(9,"h3"),d._uU(10),d.qZA(),d.TgZ(11,"h3"),d._uU(12),d.ALo(13,"titlecase"),d.qZA(),d.TgZ(14,"div",4),d.YNc(15,_,1,2,"big-stars",5),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("src",n.filmImage,d.LSH),d.xp6(3),d.Oqu(d.lcZ(6,6,n.film.titulo)),d.xp6(3),d.hij("Estreno: ",n.film.estreno,""),d.xp6(2),d.hij("Duraci\xf3n: ",n.film.duracion," minutos"),d.xp6(2),d.hij("G\xe9nero: ",d.lcZ(13,8,n.film.genero),""),d.xp6(3),d.Q6J("ngIf",n.film.puntuacion_media>=0))},directives:[i.O5,Z.T],pipes:[i.rS],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})();var b=e(9669);function O(t,n){if(1&t&&(d.TgZ(0,"div",11),d._UZ(1,"ngx-stars",12),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("readonly",!0)("initialStars",t.puntuacion)("maxStars",5)("size",1)}}const M=function(t){return{row:t}};function P(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"div",13),d.TgZ(1,"button",14),d.NdJ("click",function(){return d.CHM(t),d.oxw().onEditEmit()}),d._uU(2,"Editar comentario"),d.qZA(),d.TgZ(3,"button",15),d.NdJ("click",function(){return d.CHM(t),d.oxw().onDeteleEmit()}),d._uU(4,"Eliminar comentario"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.Q6J("ngClass",d.VKq(1,M,t.innerWidth<=570))}}const q=function(t){return{"mb-3 w-100":t}},T=function(t,n){return{"col-10":t,"col-12":n}};let A=(()=>{class t{constructor(t){this.userService=t,this.editar=!1,this.onEdit=new d.vpe,this.onDelete=new d.vpe,this.defaultAvatar=[...h.N.avatars][h.N.avatars.length-1],this.innerWidth=window.innerWidth}get puntuacion(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.puntuacion)/2}get username(){var t,n;return null===(n=null===(t=this.comment)||void 0===t?void 0:t.user)||void 0===n?void 0:n.name}get avatar(){return this.userService.getUserImage(this.comment.user)}ngOnInit(){}onEditEmit(){this.onEdit.emit(!0)}onDeteleEmit(){a().fire({title:"\xbfEliminar comentario?",icon:"question",showCancelButton:!0,cancelButtonColor:"green",cancelButtonText:"Cancelar",confirmButtonColor:"red",confirmButtonText:"Eliminar"}).then(t=>{t.isConfirmed?this.onDelete.emit(this.comment.id):(t.isDismissed||t.dismiss==a().DismissReason.backdrop)&&(0,b.LP)("Acci\xf3n cancelada")})}onResize(t){this.innerWidth=window.innerWidth}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(x.K))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-single-comment"]],hostBindings:function(t,n){1&t&&d.NdJ("resize",function(t){return n.onResize(t)},!1,d.Jf7)},inputs:{comment:"comment",editar:"editar"},outputs:{onEdit:"onEdit",onDelete:"onDelete"},decls:13,vars:12,consts:[[1,"m-3","row","justify-content-evenly"],[1,"comment-container"],[1,"m-3","row","pb-3","justify-content-start"],[1,"col-md-2","col-sm-10"],[1,"comment-section","d-flex","justify-content-center",3,"ngClass"],["alt","avatar",2,"width","120px","height","100px","object-fit","cover",3,"src"],[1,"comment-section",3,"ngClass"],["class","pt-2",4,"ngIf"],[1,"p-3"],[1,"text-descripcion"],["class","d-flex pe-3 ps-3",3,"ngClass",4,"ngIf"],[1,"pt-2"],["color","#ebe778",3,"readonly","initialStars","maxStars","size"],[1,"d-flex","pe-3","ps-3",3,"ngClass"],[1,"btn","btn-dark","me-auto","mb-3",3,"click"],[1,"btn","btn-danger","ms-auto","mb-3","end",3,"click"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d._uU(2),d.qZA(),d.qZA(),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d.TgZ(5,"div",4),d._UZ(6,"img",5),d.qZA(),d.qZA(),d.TgZ(7,"div",6),d.YNc(8,O,2,4,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"article",9),d._uU(11),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(12,P,5,3,"div",10)),2&t&&(d.xp6(2),d.Oqu(n.username),d.xp6(3),d.Q6J("ngClass",d.VKq(7,q,n.innerWidth<=570)),d.xp6(1),d.Q6J("src",n.avatar,d.LSH),d.xp6(1),d.Q6J("ngClass",d.WLB(9,T,n.innerWidth>=570,n.innerWidth<570)),d.xp6(1),d.Q6J("ngIf",n.puntuacion>=0),d.xp6(3),d.Oqu(null==n.comment?null:n.comment.descripcion),d.xp6(1),d.Q6J("ngIf",!0===n.editar))},directives:[i.mk,i.O5,c.ve],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})(),y=(()=>{class t{constructor(t){this.el=t}ngOnInit(){setTimeout(()=>{this.el.nativeElement.style.cssText="heigh: auto; padding: 0",this.el.nativeElement.style.cssText=`height: ${this.el.nativeElement.scrollHeight+50}px`},0)}onkeydown(t){this.el.nativeElement.style.cssText="heigh: auto; padding: 0",this.el.nativeElement.style.cssText=`height: ${this.el.nativeElement.scrollHeight+50}px`}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(d.SBq))},t.\u0275dir=d.lG2({type:t,selectors:[["","autosize",""]],hostBindings:function(t,n){1&t&&d.NdJ("keydown",function(t){return n.onkeydown(t)})}}),t})();const I=function(t){return{"col-2":t}};function k(t,n){if(1&t&&d._UZ(0,"div",8),2&t){const t=d.oxw();d.Q6J("ngClass",d.VKq(1,I,t.innerWidth>=570))}}const J=function(t){return{"w-100":t}},U=function(t,n){return{"comment-section":!0,"col-10":t,"w-100":n}};let S=(()=>{class t{constructor(t,n,e){this.fb=t,this.authService=n,this.UserService=e,this.onEdit=new d.vpe,this.onCancel=new d.vpe,this.commentForm=this.fb.group({descripcion:["",[o.kI.required]],puntuacion:[5,[o.kI.required,o.kI.min(1),o.kI.max(10)]],FilmId:[0],UserId:[0]}),this.innerWidth=window.innerWidth}get username(){var t,n;return(null===(n=null===(t=this.comment)||void 0===t?void 0:t.user)||void 0===n?void 0:n.name)||this.authService.user.name}get puntuacion(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.puntuacion)/2||2.5}set puntuacion(t){this.commentForm.controls.puntuacion.setValue(2*t)}get avatar(){return this.UserService.getUserImage(this.authService.user)}get screen(){return this.innerWidth>=570?4:2}ngOnInit(){this.comment&&(this.commentForm.controls.descripcion.setValue(this.comment.descripcion),this.commentForm.controls.FilmId.setValue(this.comment.FilmId),this.commentForm.controls.UserId.setValue(this.comment.UserId),this.commentForm.controls.puntuacion.setValue(this.comment.puntuacion))}edit(){this.commentForm.valid?this.onEdit.emit(this.commentForm.value):a().fire("Error","Debe escribir un comentario y puntuar para enviar","error")}cancel(){this.onCancel.emit(!1),window.scrollTo(0,document.body.scrollHeight)}onRating(t){this.puntuacion=t}onResize(t){this.innerWidth=window.innerWidth}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(o.qu),d.Y36(v.e),d.Y36(x.K))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-edit-comment"]],hostBindings:function(t,n){1&t&&d.NdJ("resize",function(t){return n.onResize(t)},!1,d.Jf7)},inputs:{comment:"comment"},outputs:{onEdit:"onEdit",onCancel:"onCancel"},decls:21,vars:16,consts:[[1,"row","justify-content-evenly"],[1,"col-md-2","col-sm-10","mt-2"],[1,"comment-section","d-flex","justify-content-center",3,"ngClass"],["alt","avatar",2,"width","60px","height","50px",3,"src"],[1,"col-10","mt-2","d-flex","align-items-center","justify-content-center","comment-section"],[3,"formGroup","ngSubmit"],[1,"m-3","row","pb-3","justify-content-center"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"pt-2"],["color","#ebe778",3,"readonly","initialStars","maxStars","size","ratingOutput"],[1,"p-3"],["autosize","","formControlName","descripcion",1,"text-descripcion-edit"],[1,"d-flex","justify-content-start"],[1,"d-flex","justify-content-between"],[1,"btn","btn-danger","ms-4","mb-3",3,"disabled","click"],["type","submit",1,"btn","btn-dark","me-5","mb-3"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d._UZ(3,"img",3),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"div"),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"form",5),d.NdJ("ngSubmit",function(){return n.edit()}),d.TgZ(8,"div",6),d.YNc(9,k,1,3,"div",7),d.TgZ(10,"div",8),d.TgZ(11,"div",9),d.TgZ(12,"ngx-stars",10),d.NdJ("ratingOutput",function(t){return n.onRating(t)}),d.qZA(),d.qZA(),d.TgZ(13,"div",11),d._UZ(14,"textarea",12),d.qZA(),d.qZA(),d.qZA(),d._UZ(15,"div",13),d.TgZ(16,"div",14),d.TgZ(17,"button",15),d.NdJ("click",function(){return n.cancel()}),d._uU(18,"Cancelar"),d.qZA(),d.TgZ(19,"button",16),d._uU(20,"Enviar"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngClass",d.VKq(11,J,n.innerWidth<570)),d.xp6(1),d.Q6J("src",n.avatar,d.LSH),d.xp6(3),d.Oqu(n.username),d.xp6(1),d.Q6J("formGroup",n.commentForm),d.xp6(2),d.Q6J("ngIf",n.innerWidth>=570),d.xp6(1),d.Q6J("ngClass",d.WLB(13,U,n.innerWidth>=570,n.innerWidth<570)),d.xp6(2),d.Q6J("readonly",!1)("initialStars",n.puntuacion)("maxStars",5)("size",n.screen),d.xp6(5),d.Q6J("disabled",!n.comment))},directives:[i.mk,o._Y,o.JL,o.sg,i.O5,c.ve,o.Fj,y,o.JJ,o.u],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})();function z(t,n){if(1&t&&d._UZ(0,"app-single-comment",13),2&t){const t=d.oxw().$implicit;d.Q6J("comment",t)}}function E(t,n){if(1&t&&(d.TgZ(0,"div",11),d.YNc(1,z,1,1,"app-single-comment",12),d.qZA()),2&t){const t=n.$implicit,e=d.oxw();d.xp6(1),d.Q6J("ngIf",!e.isMyComment(t))}}function W(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"app-single-comment",16),d.NdJ("onEdit",function(n){return d.CHM(t),d.oxw(2).setEditar(n)})("onDelete",function(n){return d.CHM(t),d.oxw(2).delete(n)}),d.qZA()}if(2&t){const t=d.oxw(2);d.Q6J("comment",t.comentario)("editar",!0)}}function N(t,n){if(1&t&&(d.TgZ(0,"div",14),d.YNc(1,W,1,2,"app-single-comment",15),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.comentario)}}function Q(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"div",14),d.TgZ(1,"app-edit-comment",18),d.NdJ("onEdit",function(n){return d.CHM(t),d.oxw(2).comment(n)})("onCancel",function(n){return d.CHM(t),d.oxw(2).setEditar(n)}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(1),d.Q6J("comment",t.comentario)}}function Y(t,n){1&t&&(d.TgZ(0,"div",19),d.TgZ(1,"p",4),d._uU(2,"Necesita estar logueado para comentar"),d.qZA(),d.TgZ(3,"p",4),d._uU(4,"\xbfYa tienes cuenta? Logueate "),d.TgZ(5,"a",20),d._uU(6,"aqu\xed"),d.qZA(),d.qZA(),d.TgZ(7,"p",4),d._uU(8,"\xbfA\xfan no eres miembro? "),d.TgZ(9,"a",21),d._uU(10,"Reg\xedstrate"),d.qZA(),d.qZA(),d.qZA())}function F(t,n){if(1&t&&(d.YNc(0,Q,2,1,"div",8),d.YNc(1,Y,11,0,"ng-template",null,17,d.W1O)),2&t){const t=d.MAs(2),n=d.oxw();d.Q6J("ngIf",!0===n.isLogged)("ngIfElse",t)}}const $=function(t){return{"container me-3":t,"mt-5":!0}};let j=(()=>{class t{constructor(t){this.authService=t,this.editComment=!1,this.comentarios=[],this.onComment=new d.vpe,this.onDelete=new d.vpe,this.innerWidth=window.innerWidth}set comentario(t){this._comentario=t}get comentario(){return this.comentarios.filter(t=>this.isMyComment(t))[0]}get isLogged(){return this.authService.loged}get screen(){return this.innerWidth>=650?5:2}ngOnInit(){setTimeout(()=>{this.comentario||(this.editComment=!0)},200)}onResize(t){this.innerWidth=window.innerWidth}comment(t){console.log(t),this.onComment.emit(t),this.editComment=!1}isMyComment(t){return t.UserId===this.authService.user.id}setEditar(t){this.editComment=t,setTimeout(()=>window.scrollTo(0,document.body.scrollHeight),150)}delete(t){this.onDelete.emit(t)}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(v.e))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-main-comments-loader"]],hostBindings:function(t,n){1&t&&d.NdJ("resize",function(t){return n.onResize(t)},!1,d.Jf7)},inputs:{film:"film",comentario:"comentario",comentarios:"comentarios"},outputs:{onComment:"onComment",onDelete:"onDelete"},decls:14,vars:9,consts:[[1,"container","pt-5"],[3,"film","innerWidth"],[1,"container","mt-5"],[1,"row","mb-3"],[2,"text-align","center"],["class","container comment-container mb-2",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"comment-container"],["class","animate__animated animate__fadeIn",4,"ngIf","ngIfElse"],["sinComentario",""],[1,"pb-5"],[1,"container","comment-container","mb-2"],[3,"comment",4,"ngIf"],[3,"comment"],[1,"animate__animated","animate__fadeIn"],[3,"comment","editar","onEdit","onDelete",4,"ngIf"],[3,"comment","editar","onEdit","onDelete"],["noLogin",""],[3,"comment","onEdit","onCancel"],[2,"color","black !important"],["routerLink","/auth/login"],["routerLink","/auth/register"]],template:function(t,n){if(1&t&&(d.TgZ(0,"div",0),d._UZ(1,"app-film-info",1),d.qZA(),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"p",4),d._uU(5),d.qZA(),d.YNc(6,E,2,1,"div",5),d.qZA(),d.qZA(),d._UZ(7,"hr"),d.TgZ(8,"div",6),d.TgZ(9,"div",7),d.YNc(10,N,2,1,"div",8),d.YNc(11,F,3,2,"ng-template",null,9,d.W1O),d.qZA(),d.qZA(),d._UZ(13,"div",10)),2&t){const t=d.MAs(12);d.xp6(1),d.Q6J("film",n.film)("innerWidth",n.innerWidth),d.xp6(4),d.hij(" Comentarios: ",n.comentarios.length," "),d.xp6(1),d.Q6J("ngForOf",n.comentarios),d.xp6(2),d.Q6J("ngClass",d.VKq(7,$,n.innerWidth>=570)),d.xp6(2),d.Q6J("ngIf",!1===n.editComment&&!0===n.isLogged)("ngIfElse",t)}},directives:[w,i.sg,i.mk,i.O5,A,S,s.yS],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})(),D=(()=>{class t{constructor(t,n,e,i){this.aR=t,this.filmService=n,this.commentsService=e,this.router=i,this.filmId=Number(this.aR.snapshot.url[1].path),this.film={id:0,UserId:0,estreno:0,titulo:"",genero:"Sin Genero"},this.comentarios=[],this.total=0,this.router.onSameUrlNavigation="reload"}ngOnInit(){this.filmService.getOneFilm(this.filmId).subscribe(t=>{this.film=t}),this.buscarComentario(),this.repoblarComentarios()}comment(t){this.comentario?this.commentsService.updateOneComment(this.filmId,this.comentario.id,t).subscribe(t=>{this.repoblarComentarios(),this.router.navigate([this.router.url])}):this.commentsService.insertOneComment(this.filmId,t).subscribe(t=>{this.repoblarComentarios(),this.router.navigate([this.router.url])})}delete(t){this.commentsService.deleteOneComment(this.filmId,t).subscribe(t=>{this.router.navigate([this.router.url]),a().fire("Comentario eliminado","Se ha eliminado su comentario","success")})}buscarComentario(){this.commentsService.getOneCommentByUser(this.filmId).subscribe(t=>{t&&(this.comentario=t.comment)})}repoblarComentarios(){this.commentsService.getAllComments(this.filmId).subscribe(t=>{this.total=t.total,this.comentarios=t.comments})}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(s.gz),d.Y36(l.d),d.Y36(C),d.Y36(s.F0))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-add-comment"]],decls:2,vars:3,consts:[[3,"film","comentario","comentarios","onComment","onDelete"]],template:function(t,n){1&t&&(d.TgZ(0,"div"),d.TgZ(1,"app-main-comments-loader",0),d.NdJ("onComment",function(t){return n.comment(t)})("onDelete",function(t){return n.delete(t)}),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("film",n.film)("comentario",n.comentario)("comentarios",n.comentarios))},directives:[j],styles:[".back-fixed[_ngcontent-%COMP%]{background-attachment:fixed}.back-no-fixed[_ngcontent-%COMP%]{background-attachment:scroll}"]}),t})();const B=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-home-component"]],decls:5,vars:0,consts:[[1,"filmContainer","d-flex","justify-content-center","align-items-center"],[1,"container","pt-3"],[1,"row","justify-content-center"],[1,"component-container"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"router-outlet"),d.qZA(),d.qZA(),d.qZA(),d.qZA())},directives:[s.lC],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})(),children:[{path:"film/:id",component:D},{path:"**",redirectTo:"/films/list"}]}];let L=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[s.Bz.forChild(B)],s.Bz]}),t})();var H=e(4466);let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.ez,L,o.UX,r.IJ,c.k$,H.m]]}),t})()}}]);