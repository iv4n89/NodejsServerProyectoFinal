(self.webpackChunkproyecto_t4=self.webpackChunkproyecto_t4||[]).push([[626],{6626:(t,n,e)=>{"use strict";e.r(n),e.d(n,{CommentsModule:()=>R});var i=e(8583),o=e(7957),r=e(8259),s=e.n(r),c=e(7716),m=e(8726),a=e(5917),d=e(1841),l=e(8002),u=e(5304),g=e(9666);let f=(()=>{class t{constructor(t,n){this.http=t,this.userService=n,this.url="http://localhost:3000/api"}getAllComments(t){return this.http.get(`${this.url}/comments/film/${t}`).pipe((0,l.U)(t=>{for(let n of t.comments)this.userService.getOneUser(n.UserId).subscribe(t=>n.user=t);return t}))}getOneComment(t,n){return this.http.get(`${this.url}/comments/film/${t}/${n}`)}getOneCommentByUser(t){const n=(new d.WM).set("x-token",localStorage.getItem("token"));return this.http.get(`${this.url}/comments/byuser/${t}`,{headers:n}).pipe((0,u.K)(t=>(0,a.of)(t.message)))}insertOneComment(t,n){const e=(new d.WM).set("x-token",localStorage.getItem("token"));return this.http.post(`${this.url}/comments/film/${t}`,n,{headers:e})}updateOneComment(t,n,e){const i=(new d.WM).set("x-token",localStorage.getItem("token"));return this.http.put(`${this.url}/comments/film/${t}/${n}`,e,{headers:i})}deleteOneComment(t,n){const e=(new d.WM).set("x-token",localStorage.getItem("token"));return this.http.delete(`${this.url}/comments/film/${t}/${n}`,{headers:e})}}return t.\u0275fac=function(n){return new(n||t)(c.LFG(d.eN),c.LFG(g.K))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=e(2340),p=e(6518),x=e(9350),C=e(9669),v=e(4426);function Z(t,n){if(1&t&&(c.TgZ(0,"div",11),c._UZ(1,"ngx-stars",12),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("readonly",!0)("initialStars",t.puntuacion)("maxStars",5)("size",1)}}const _=function(t){return{row:t}};function w(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"button",14),c.NdJ("click",function(){return c.CHM(t),c.oxw().onEditEmit()}),c._uU(2,"Editar comentario"),c.qZA(),c.TgZ(3,"button",15),c.NdJ("click",function(){return c.CHM(t),c.oxw().onDeteleEmit()}),c._uU(4,"Eliminar comentario"),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.Q6J("ngClass",c.VKq(1,_,t.innerWidth<=570))}}const b=function(t){return{"mb-3 w-100":t}},O=function(t,n){return{"col-10":t,"col-12":n}};let M=(()=>{class t{constructor(t){this.userService=t,this.editar=!1,this.onEdit=new c.vpe,this.onDelete=new c.vpe,this.defaultAvatar=[...h.N.avatars][h.N.avatars.length-1],this.innerWidth=window.innerWidth}get puntuacion(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.puntuacion)/2}get username(){var t,n;return null===(n=null===(t=this.comment)||void 0===t?void 0:t.user)||void 0===n?void 0:n.name}get avatar(){return this.userService.getUserImage(this.comment.user)}ngOnInit(){}onEditEmit(){this.onEdit.emit(!0)}onDeteleEmit(){s().fire({title:"\xbfEliminar comentario?",icon:"question",showCancelButton:!0,cancelButtonColor:"green",cancelButtonText:"Cancelar",confirmButtonColor:"red",confirmButtonText:"Eliminar"}).then(t=>{t.isConfirmed?this.onDelete.emit(this.comment.id):(t.isDismissed||t.dismiss==s().DismissReason.backdrop)&&(0,C.LP)("Acci\xf3n cancelada")})}onResize(t){this.innerWidth=window.innerWidth}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(g.K))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-single-comment"]],hostBindings:function(t,n){1&t&&c.NdJ("resize",function(t){return n.onResize(t)},!1,c.Jf7)},inputs:{comment:"comment",editar:"editar"},outputs:{onEdit:"onEdit",onDelete:"onDelete"},decls:13,vars:12,consts:[[1,"m-3","row","justify-content-evenly"],[1,"comment-container"],[1,"m-3","row","pb-3","justify-content-start"],[1,"col-md-2","col-sm-10"],[1,"comment-section","d-flex","justify-content-center",3,"ngClass"],["alt","avatar",2,"width","120px","height","100px","object-fit","cover",3,"src"],[1,"comment-section",3,"ngClass"],["class","pt-2",4,"ngIf"],[1,"p-3"],[1,"text-descripcion"],["class","d-flex pe-3 ps-3",3,"ngClass",4,"ngIf"],[1,"pt-2"],["color","#ebe778",3,"readonly","initialStars","maxStars","size"],[1,"d-flex","pe-3","ps-3",3,"ngClass"],[1,"btn","btn-dark","me-auto","mb-3",3,"click"],[1,"btn","btn-danger","ms-auto","mb-3","end",3,"click"]],template:function(t,n){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._uU(2),c.qZA(),c.qZA(),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c._UZ(6,"img",5),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.YNc(8,Z,2,4,"div",7),c.TgZ(9,"div",8),c.TgZ(10,"article",9),c._uU(11),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(12,w,5,3,"div",10)),2&t&&(c.xp6(2),c.Oqu(n.username),c.xp6(3),c.Q6J("ngClass",c.VKq(7,b,n.innerWidth<=570)),c.xp6(1),c.Q6J("src",n.avatar,c.LSH),c.xp6(1),c.Q6J("ngClass",c.WLB(9,O,n.innerWidth>=570,n.innerWidth<570)),c.xp6(1),c.Q6J("ngIf",n.puntuacion>=0),c.xp6(3),c.Oqu(null==n.comment?null:n.comment.descripcion),c.xp6(1),c.Q6J("ngIf",!0===n.editar))},directives:[i.mk,i.O5,v.ve],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})();var q=e(665);let T=(()=>{class t{constructor(t){this.el=t}ngOnInit(){setTimeout(()=>{this.el.nativeElement.style.cssText="heigh: auto; padding: 0",this.el.nativeElement.style.cssText=`height: ${this.el.nativeElement.scrollHeight+50}px`},0)}onkeydown(t){this.el.nativeElement.style.cssText="heigh: auto; padding: 0",this.el.nativeElement.style.cssText=`height: ${this.el.nativeElement.scrollHeight+50}px`}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(c.SBq))},t.\u0275dir=c.lG2({type:t,selectors:[["","autosize",""]],hostBindings:function(t,n){1&t&&c.NdJ("keydown",function(t){return n.onkeydown(t)})}}),t})();const A=function(t){return{"col-2":t}};function P(t,n){if(1&t&&c._UZ(0,"div",8),2&t){const t=c.oxw();c.Q6J("ngClass",c.VKq(1,A,t.innerWidth>=570))}}const y=function(t){return{"w-100":t}},I=function(t,n){return{"comment-section":!0,"col-10":t,"w-100":n}};let k=(()=>{class t{constructor(t,n,e){this.fb=t,this.authService=n,this.UserService=e,this.onEdit=new c.vpe,this.onCancel=new c.vpe,this.commentForm=this.fb.group({descripcion:["",[q.kI.required]],puntuacion:[5,[q.kI.required,q.kI.min(1),q.kI.max(10)]],FilmId:[0],UserId:[0]}),this.innerWidth=window.innerWidth}get username(){var t,n;return(null===(n=null===(t=this.comment)||void 0===t?void 0:t.user)||void 0===n?void 0:n.name)||this.authService.user.name}get puntuacion(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.puntuacion)/2||2.5}set puntuacion(t){this.commentForm.controls.puntuacion.setValue(2*t)}get avatar(){return this.UserService.getUserImage(this.authService.user)}get screen(){return this.innerWidth>=570?4:2}ngOnInit(){this.comment&&(this.commentForm.controls.descripcion.setValue(this.comment.descripcion),this.commentForm.controls.FilmId.setValue(this.comment.FilmId),this.commentForm.controls.UserId.setValue(this.comment.UserId),this.commentForm.controls.puntuacion.setValue(this.comment.puntuacion))}onEditEmit(){this.onEdit.emit(this.commentForm.value)}onCancelEmit(){this.onCancel.emit(!1),window.scrollTo(0,document.body.scrollHeight)}onRating(t){this.puntuacion=t}onResize(t){this.innerWidth=window.innerWidth}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(q.qu),c.Y36(p.e),c.Y36(g.K))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-edit-comment"]],hostBindings:function(t,n){1&t&&c.NdJ("resize",function(t){return n.onResize(t)},!1,c.Jf7)},inputs:{comment:"comment"},outputs:{onEdit:"onEdit",onCancel:"onCancel"},decls:21,vars:16,consts:[[1,"m-3","row","justify-content-evenly"],[1,"col-md-2","col-sm-10","mt-2"],[1,"comment-section","d-flex","justify-content-center",3,"ngClass"],["alt","avatar",2,"width","60px","height","50px",3,"src"],[1,"col-10","mt-2","d-flex","align-items-center","justify-content-center","comment-section"],[3,"formGroup","ngSubmit"],[1,"m-3","row","pb-3","justify-content-center"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"pt-2"],["color","#ebe778",3,"readonly","initialStars","maxStars","size","ratingOutput"],[1,"p-3"],["autosize","","formControlName","descripcion",1,"text-descripcion-edit"],[1,"d-flex","justify-content-start"],[1,"d-flex","justify-content-between"],[1,"btn","btn-danger","ms-4","mb-3",3,"disabled","click"],["type","submit",1,"btn","btn-dark","me-5","mb-3"]],template:function(t,n){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"img",3),c.qZA(),c.qZA(),c.TgZ(4,"div",4),c.TgZ(5,"div"),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"form",5),c.NdJ("ngSubmit",function(){return n.onEditEmit()}),c.TgZ(8,"div",6),c.YNc(9,P,1,3,"div",7),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c.TgZ(12,"ngx-stars",10),c.NdJ("ratingOutput",function(t){return n.onRating(t)}),c.qZA(),c.qZA(),c.TgZ(13,"div",11),c._UZ(14,"textarea",12),c.qZA(),c.qZA(),c.qZA(),c._UZ(15,"div",13),c.TgZ(16,"div",14),c.TgZ(17,"button",15),c.NdJ("click",function(){return n.onCancelEmit()}),c._uU(18,"Cancelar"),c.qZA(),c.TgZ(19,"button",16),c._uU(20,"Enviar"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngClass",c.VKq(11,y,n.innerWidth<570)),c.xp6(1),c.Q6J("src",n.avatar,c.LSH),c.xp6(3),c.Oqu(n.username),c.xp6(1),c.Q6J("formGroup",n.commentForm),c.xp6(2),c.Q6J("ngIf",n.innerWidth>=570),c.xp6(1),c.Q6J("ngClass",c.WLB(13,I,n.innerWidth>=570,n.innerWidth<570)),c.xp6(2),c.Q6J("readonly",!1)("initialStars",n.puntuacion)("maxStars",5)("size",n.screen),c.xp6(5),c.Q6J("disabled",!n.comment))},directives:[i.mk,q._Y,q.JL,q.sg,i.O5,v.ve,q.Fj,T,q.JJ,q.u],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})();function J(t,n){if(1&t&&c._UZ(0,"big-stars",18),2&t){const t=c.oxw();c.Q6J("initial_stars",t.film.puntuacion_media/2)("size",t.screen)}}function E(t,n){if(1&t&&c._UZ(0,"app-single-comment",21),2&t){const t=c.oxw().$implicit;c.Q6J("comment",t)}}function U(t,n){if(1&t&&(c.TgZ(0,"div",19),c.TgZ(1,"div",19),c.TgZ(2,"div",14),c.YNc(3,E,1,1,"app-single-comment",20),c.qZA(),c.qZA(),c.qZA()),2&t){const t=n.$implicit,e=c.oxw();c.xp6(3),c.Q6J("ngIf",!e.isMyComment(t))}}function S(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"app-single-comment",24),c.NdJ("onEdit",function(n){return c.CHM(t),c.oxw(2).setEditar(n)})("onDelete",function(n){return c.CHM(t),c.oxw(2).delete(n)}),c.qZA()}if(2&t){const t=c.oxw(2);c.Q6J("comment",t.comentario)("editar",!0)}}function z(t,n){if(1&t&&(c.TgZ(0,"div",22),c.YNc(1,S,1,2,"app-single-comment",23),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.comentario)}}function W(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"div",22),c.TgZ(1,"app-edit-comment",26),c.NdJ("onEdit",function(n){return c.CHM(t),c.oxw(2).comment(n)})("onCancel",function(n){return c.CHM(t),c.oxw(2).setEditar(n)}),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(2);c.xp6(1),c.Q6J("comment",t.comentario)}}function N(t,n){1&t&&(c.TgZ(0,"div",27),c.TgZ(1,"p",10),c._uU(2,"Necesita estar logueado para comentar"),c.qZA(),c.TgZ(3,"p",10),c._uU(4,"\xbfYa tienes cuenta? Logueate "),c.TgZ(5,"a",28),c._uU(6,"aqu\xed"),c.qZA(),c.qZA(),c.TgZ(7,"p",10),c._uU(8,"\xbfA\xfan no eres miembro? "),c.TgZ(9,"a",29),c._uU(10,"Reg\xedstrate"),c.qZA(),c.qZA(),c.qZA())}function Q(t,n){if(1&t&&(c.YNc(0,W,2,1,"div",15),c.YNc(1,N,11,0,"ng-template",null,25,c.W1O)),2&t){const t=c.MAs(2),n=c.oxw();c.Q6J("ngIf",!0===n.isLogged)("ngIfElse",t)}}const Y=function(t){return{container:t}},F=function(t){return{"container me-3 ms-3":t}};let $=(()=>{class t{constructor(t){this.authService=t,this.editComment=!1,this.comentarios=[],this.onComment=new c.vpe,this.onDelete=new c.vpe,this.innerWidth=window.innerWidth}set comentario(t){this._comentario=t}get comentario(){return this.comentarios.filter(t=>this.isMyComment(t))[0]}get isLogged(){return this.authService.loged}get screen(){return this.innerWidth>=650?5:2}get filmImage(){return this.film.img&&!this.film.img.includes("/")?`${h.N.filmsImageUrl}/${this.film.id}`:this.film.img}ngOnInit(){setTimeout(()=>{this.comentario||(this.editComment=!0)},50)}onResize(t){this.innerWidth=window.innerWidth}comment(t){console.log(t),this.onComment.emit(t),this.editComment=!1}isMyComment(t){return t.UserId===this.authService.user.id}setEditar(t){this.editComment=t,setTimeout(()=>window.scrollTo(0,document.body.scrollHeight),150)}delete(t){this.onDelete.emit(t)}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(p.e))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-main-comments-loader"]],hostBindings:function(t,n){1&t&&c.NdJ("resize",function(t){return n.onResize(t)},!1,c.Jf7)},inputs:{film:"film",comentario:"comentario",comentarios:"comentarios"},outputs:{onComment:"onComment",onDelete:"onDelete"},decls:31,vars:20,consts:[[1,"container","pt-5"],[1,"row","film-info"],[1,"col-md-5","col-sm-10","justify-content-center","d-flex"],["alt","pelicula",3,"src"],[1,"col-md-5","col-sm-10"],[1,"comment-container",2,"background-color","transparent !important"],["color","#11101d",3,"initial_stars","size",4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"mb-3"],[2,"text-align","center"],["class","container",4,"ngFor","ngForOf"],[1,"mt-5",3,"ngClass"],[3,"ngClass"],[1,"comment-container"],["class","animate__animated animate__fadeIn",4,"ngIf","ngIfElse"],["sinComentario",""],[1,"pb-5"],["color","#11101d",3,"initial_stars","size"],[1,"container"],[3,"comment",4,"ngIf"],[3,"comment"],[1,"animate__animated","animate__fadeIn"],[3,"comment","editar","onEdit","onDelete",4,"ngIf"],[3,"comment","editar","onEdit","onDelete"],["noLogin",""],[3,"comment","onEdit","onCancel"],[2,"color","black !important"],["routerLink","/auth/login"],["routerLink","/auth/register"]],template:function(t,n){if(1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"img",3),c.qZA(),c.TgZ(4,"div",4),c.TgZ(5,"h1"),c._uU(6),c.ALo(7,"titlecase"),c.qZA(),c.TgZ(8,"h3"),c._uU(9),c.qZA(),c.TgZ(10,"h3"),c._uU(11),c.qZA(),c.TgZ(12,"h3"),c._uU(13),c.ALo(14,"titlecase"),c.qZA(),c.TgZ(15,"div",5),c.YNc(16,J,1,2,"big-stars",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",7),c.TgZ(18,"div",8),c.TgZ(19,"div",9),c.TgZ(20,"p",10),c._uU(21),c.qZA(),c.YNc(22,U,4,1,"div",11),c.qZA(),c.qZA(),c.qZA(),c._UZ(23,"hr"),c.TgZ(24,"div",12),c.TgZ(25,"div",13),c.TgZ(26,"div",14),c.YNc(27,z,2,1,"div",15),c.YNc(28,Q,3,2,"ng-template",null,16,c.W1O),c.qZA(),c.qZA(),c.qZA(),c._UZ(30,"div",17)),2&t){const t=c.MAs(29);c.xp6(3),c.Q6J("src",n.filmImage,c.LSH),c.xp6(3),c.Oqu(c.lcZ(7,12,n.film.titulo)),c.xp6(3),c.hij("Estreno: ",n.film.estreno,""),c.xp6(2),c.hij("Duraci\xf3n: ",n.film.duracion," minutos"),c.xp6(2),c.hij("G\xe9nero: ",c.lcZ(14,14,n.film.genero),""),c.xp6(3),c.Q6J("ngIf",n.film.puntuacion_media>=0),c.xp6(5),c.hij(" Comentarios: ",n.comentarios.length," "),c.xp6(1),c.Q6J("ngForOf",n.comentarios),c.xp6(2),c.Q6J("ngClass",c.VKq(16,Y,n.innerWidth>=570)),c.xp6(1),c.Q6J("ngClass",c.VKq(18,F,n.innerWidth>=570)),c.xp6(2),c.Q6J("ngIf",!1===n.editComment&&!0===n.isLogged)("ngIfElse",t)}},directives:[i.O5,i.sg,i.mk,x.T,M,k,o.yS],pipes:[i.rS],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})(),j=(()=>{class t{constructor(t,n,e,i){this.aR=t,this.filmService=n,this.commentsService=e,this.router=i,this.filmId=Number(this.aR.snapshot.url[1].path),this.film={id:0,UserId:0,estreno:0,titulo:"",genero:"Sin Genero"},this.comentarios=[],this.total=0,this.router.onSameUrlNavigation="reload"}ngOnInit(){this.filmService.getOneFilm(this.filmId).subscribe(t=>{this.film=t}),this.buscarComentario(),this.repoblarComentarios()}comment(t){this.comentario?this.commentsService.updateOneComment(this.filmId,this.comentario.id,t).subscribe(t=>{this.repoblarComentarios(),this.router.navigate([this.router.url])}):this.commentsService.insertOneComment(this.filmId,t).subscribe(t=>{this.repoblarComentarios(),this.router.navigate([this.router.url])})}delete(t){this.commentsService.deleteOneComment(this.filmId,t).subscribe(t=>{this.router.navigate([this.router.url]),s().fire("Comentario eliminado","Se ha eliminado su comentario","success")})}buscarComentario(){this.commentsService.getOneCommentByUser(this.filmId).subscribe(t=>{t&&(this.comentario=t.comment)})}repoblarComentarios(){this.commentsService.getAllComments(this.filmId).subscribe(t=>{this.total=t.total,this.comentarios=t.comments})}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(o.gz),c.Y36(m.d),c.Y36(f),c.Y36(o.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-add-comment"]],decls:2,vars:3,consts:[[3,"film","comentario","comentarios","onComment","onDelete"]],template:function(t,n){1&t&&(c.TgZ(0,"div"),c.TgZ(1,"app-main-comments-loader",0),c.NdJ("onComment",function(t){return n.comment(t)})("onDelete",function(t){return n.delete(t)}),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.Q6J("film",n.film)("comentario",n.comentario)("comentarios",n.comentarios))},directives:[$],styles:[".back-fixed[_ngcontent-%COMP%]{background-attachment:fixed}.back-no-fixed[_ngcontent-%COMP%]{background-attachment:scroll}"]}),t})();const B=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-home-component"]],decls:5,vars:0,consts:[[1,"filmContainer","d-flex","justify-content-center","align-items-center"],[1,"container","pt-3"],[1,"row","justify-content-center"],[1,"component-container"]],template:function(t,n){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"router-outlet"),c.qZA(),c.qZA(),c.qZA(),c.qZA())},directives:[o.lC],styles:[".comment-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#00000026;color:#fff}.comment-section[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:-3px 3px 4px #000;width:120px;color:#000}.text-descripcion[_ngcontent-%COMP%]{white-space:pre-wrap}.text-descripcion-edit[_ngcontent-%COMP%]{overflow:hidden;padding:10px;width:100%;display:block;border-radius:10px;border:1px solid grey}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:450px;border-radius:10px}.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;font-weight:700}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 570px){.film-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3em}.film-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em}.film-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:225px}}"]}),t})(),children:[{path:"film/:id",component:j},{path:"**",redirectTo:"/films/list"}]}];let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.Bz.forChild(B)],o.Bz]}),t})();var L=e(3238),H=e(4466);let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,D,q.UX,L.IJ,v.k$,H.m]]}),t})()}}]);